<!DOCTYPE html><html lang="ko"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>엘레강트 오브젝트 | Choi's Dev</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-203671947-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">엘레강트 오브젝트</h1><a id="logo" href="/.">Choi's Dev</a><p class="description">Software Engineer, Backend-Developer</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 홈</i></a><a href="/archives/"><i class="fa fa-archive"> 아카이브</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">엘레강트 오브젝트</h1><div class="post-meta">2021-04-24<span> | </span><span class="category"><a href="/categories/ARCHITECTURE/">ARCHITECTURE</a></span></div><div class="post-content"><h1 id="엘레강트-오브젝트"><a href="#엘레강트-오브젝트" class="headerlink" title="엘레강트 오브젝트"></a>엘레강트 오브젝트</h1><h2 id="1장-출생"><a href="#1장-출생" class="headerlink" title="1장 출생"></a>1장 출생</h2><hr>
<h3 id="1-1-er로-끝나는-이름을-사용하지-마세요"><a href="#1-1-er로-끝나는-이름을-사용하지-마세요" class="headerlink" title="1.1 -er로 끝나는 이름을 사용하지 마세요"></a>1.1 -er로 끝나는 이름을 사용하지 마세요</h3><h3 id="1-2-생성자-하나를-주-생성자로-만드세요"><a href="#1-2-생성자-하나를-주-생성자로-만드세요" class="headerlink" title="1.2 생성자 하나를 주 생성자로 만드세요"></a>1.2 생성자 하나를 주 생성자로 만드세요</h3><h3 id="1-3-생성자에-코드를-넣지-마세요"><a href="#1-3-생성자에-코드를-넣지-마세요" class="headerlink" title="1.3 생성자에 코드를 넣지 마세요"></a>1.3 생성자에 코드를 넣지 마세요</h3><h2 id="2장-학습"><a href="#2장-학습" class="headerlink" title="2장 학습"></a>2장 학습</h2><hr>
<h3 id="2-1-가능하면-적게-캡슐화하세요"><a href="#2-1-가능하면-적게-캡슐화하세요" class="headerlink" title="2.1 가능하면 적게 캡슐화하세요"></a>2.1 가능하면 적게 캡슐화하세요</h3><h3 id="2-2-최소한-뭔가는-캡슐화하세요"><a href="#2-2-최소한-뭔가는-캡슐화하세요" class="headerlink" title="2.2 최소한 뭔가는 캡슐화하세요"></a>2.2 최소한 뭔가는 캡슐화하세요</h3><h3 id="2-3-항상-인터페이스를-사용하세요"><a href="#2-3-항상-인터페이스를-사용하세요" class="headerlink" title="2.3 항상 인터페이스를 사용하세요"></a>2.3 항상 인터페이스를 사용하세요</h3><h3 id="2-4-메서드-이름을-신중하게-선택하세요"><a href="#2-4-메서드-이름을-신중하게-선택하세요" class="headerlink" title="2.4 메서드 이름을 신중하게 선택하세요"></a>2.4 메서드 이름을 신중하게 선택하세요</h3><h3 id="2-5-퍼블릭-상수-public-constant-를-사용하지-마세요"><a href="#2-5-퍼블릭-상수-public-constant-를-사용하지-마세요" class="headerlink" title="2.5 퍼블릭 상수(public constant)를 사용하지 마세요"></a>2.5 퍼블릭 상수(public constant)를 사용하지 마세요</h3><h3 id="2-6-불변-객체로-만드세요"><a href="#2-6-불변-객체로-만드세요" class="headerlink" title="2.6 불변 객체로 만드세요"></a>2.6 불변 객체로 만드세요</h3><h3 id="2-7-문서를-작성하는-대신-테스트를-만드세요"><a href="#2-7-문서를-작성하는-대신-테스트를-만드세요" class="headerlink" title="2.7 문서를 작성하는 대신 테스트를 만드세요"></a>2.7 문서를 작성하는 대신 테스트를 만드세요</h3><h3 id="2-8모의-객체-Mock-대신-페이크-객체-Fake-를-사용하세요"><a href="#2-8모의-객체-Mock-대신-페이크-객체-Fake-를-사용하세요" class="headerlink" title="2.8모의 객체(Mock) 대신 페이크 객체(Fake)를 사용하세요"></a>2.8모의 객체(Mock) 대신 페이크 객체(Fake)를 사용하세요</h3><h3 id="2-9인터페이스를-짧게-유지하고-스마트-smart-를-사용하세요"><a href="#2-9인터페이스를-짧게-유지하고-스마트-smart-를-사용하세요" class="headerlink" title="2.9인터페이스를 짧게 유지하고 스마트(smart)를 사용하세요"></a>2.9인터페이스를 짧게 유지하고 스마트(smart)를 사용하세요</h3><h2 id="3장-취업"><a href="#3장-취업" class="headerlink" title="3장 취업"></a>3장 취업</h2><hr>
<h3 id="3-1-5개-이하의-public-메서드만-노출하세요"><a href="#3-1-5개-이하의-public-메서드만-노출하세요" class="headerlink" title="3.1 5개 이하의 public 메서드만 노출하세요"></a>3.1 5개 이하의 public 메서드만 노출하세요</h3><ul>
<li>20개의 메소드를 가진 클래스를 50줄로 구현했다고 이 클래스가 작다고 말할 수 있을까?</li>
<li>public 메소드가 많을수록 클래스도 거기에 비례하여 커질수 있고, 이는 곧 유지보수성을 저하시키는 요인이 될 수 있음</li>
<li>public 메소드의 수를 최소로 사용. public 메소드는 객체의 진입점이며 진입점의 수가 적을수록 문제가 발생하더라도 쉽게 수정이 가능</li>
<li>클래스가 작으면 메소드와 필드가 더 가까이 있을 확률이 높기 때문에 응집도가 높아지는 효과가 있을 수 있음.<h3 id="3-2-정적-메서드를-사용하지-마세요"><a href="#3-2-정적-메서드를-사용하지-마세요" class="headerlink" title="3.2 정적 메서드를 사용하지 마세요"></a>3.2 정적 메서드를 사용하지 마세요</h3></li>
<li>정적 메소드를 사용하게 되면, 평가의 방법이 eager한 방식으로 처리가 될 여지가 큼</li>
<li>정적 메소드를 사용하지 않고, 이를 객체로 만들 경우, 필요한 순간에 평가를 진행할 수 있기 때문에 lazy한 평가를 수행할 수 있어 어느정도 성능적인 최적화가 가능.</li>
<li>명령형 vs 선언형, 잘짜놓은 객체지향스러운 코드는 선언형 성격이 강함. 결국 [알고리즘 - 실행]의 맥락으로 접근하는 것이 아닌 [객체 - 행동]의 관점으로 사고하는 것을 이야기함.</li>
<li>유틸리티 성격의 클래스(XXXXUtil, XXXXHeler)를 굳이 사용하는 경우엔, 해당 객체의 인스턴스화가 필요없기 때문에 private constructor를 선언하여 객체 생성을 막도록 하는 것이 좋다.</li>
<li>싱글톤의 목적은 객체의 상태를 가지는 것이 아니라, <code>분리 가능한 의존성</code>을 가지는 것이 핵심이다. 하지만, 싱글톤 역시 또 다른 의미의 전역 변수를 만드는 것과 크게 다르지 않을 수 있다.</li>
<li>이상적인 FP에서는 최소의 출구만을 만드는 것이 최선</li>
<li>더 작은 객체로 개념을 고립시키고 이를 조합하는 것이 객체지향에서는 최선이다.</li>
</ul>
<h3 id="3-3인자의-값으로-NULL을-절대-허용하지-마세요"><a href="#3-3인자의-값으로-NULL을-절대-허용하지-마세요" class="headerlink" title="3.3인자의 값으로 NULL을 절대 허용하지 마세요"></a>3.3인자의 값으로 NULL을 절대 허용하지 마세요</h3><ul>
<li><code>null</code>은 죄악이다. 프로그래머들이 접근할 수 없는 메모리 값을 <code>0</code>으로 표현하고 이를 가리켜 null로 부르는 동의에서 시작된 것이다.</li>
<li><code>null</code>을 전달해야 하는 상황이라면, 차라리 빈 객체를 만들어 전달하자.</li>
<li><code>null</code>에 대한 처리를 해야 하는 상황이라면, 반드시 쉴드패턴(<code>shield pattern</code>)과 같은 구현 방식으로 예외를 호출자에게 전달하도록 유도하는 것이 좋다. JVM에서 권고하는 예외 클래스를 사용하는 것이 그 예시<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterable&lt;File&gt; <span class="title">find</span><span class="params">(Mask mask)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (mask == <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Mask can&#x27;t be NULL&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-4-충성스러우면서-불변이거나-아니면-상수이거나"><a href="#3-4-충성스러우면서-불변이거나-아니면-상수이거나" class="headerlink" title="3.4 충성스러우면서 불변이거나, 아니면 상수이거나"></a>3.4 충성스러우면서 불변이거나, 아니면 상수이거나</h3><ul>
<li>많은 사람들이 상태(<code>state</code>)와 데이터(<code>data</code>)를 오해하고 있음</li>
<li>객체란 디스크에 있는 파일, 웹 페이지 혹은 메모리에 존재하는 바이트 배열, 해시맵 등과 같은 실제 엔티티의 대표자이다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 아래 코드에서 File 객체는 실제 파일의 대표자 역할을 수행</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">echo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	File f = <span class="keyword">new</span> File(<span class="string">&quot;/tmp/test.txt&quot;</span>);</span><br><span class="line">	System.out.println(<span class="string">&quot;File size : %d&quot;</span>, f.length());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>일반적인 객체는 식별자(identity), 상태(state), 행동(behavior)를 포함. </li>
</ul>
<h3 id="3-5-절대-getter와-setter를-사용하지-마세요"><a href="#3-5-절대-getter와-setter를-사용하지-마세요" class="headerlink" title="3.5 절대 getter와 setter를 사용하지 마세요"></a>3.5 절대 getter와 setter를 사용하지 마세요</h3><ul>
<li>클래스는 다르다. 어떤 식으로든 맴버에게 접근하는 것을 허용하지 않으며, 노출을 하지도 않는다. 할 수 있는 일은 오직 객체에게 <code>요청</code>하는 것 뿐이다.</li>
<li>자료구조는 <code>glass box</code>, 객체는 <code>black box</code></li>
<li><em><strong>프로그래밍에서 가시성의 범위를 줄이는 것은 사물을 단순화시키는 것이며 이해의 범위가 작을수록 유지보수성과 코드의 대한 이해/수정이 쉬워진다.</strong></em></li>
<li><code>Getter/Setter</code>는 클래스를 자료구조로 사용하는 목적에서 도입이 되었다. 이는 곧, 발가벗겨진 데이터가 그대로 노출이 되며 절차적인 프로그래밍 스타일을 사용하도록 부추기게 된다.</li>
<li><code>Getter/Setter</code>는 데이터가 무방비로 <code>public</code>하게 노출되어 있는 것과 마찬가지이다. 결국 이러한 형태의 객체는 하나의 데이터로서 역할만을 수행할 수 밖에 없다.</li>
</ul>
<h3 id="3-6-부-ctor-밖에서는-new를-사용하지-마세요"><a href="#3-6-부-ctor-밖에서는-new를-사용하지-마세요" class="headerlink" title="3.6 부 ctor 밖에서는 new를 사용하지 마세요"></a>3.6 부 ctor 밖에서는 new를 사용하지 마세요</h3><ul>
<li>클래스가 작고 단순하며 네트워크나 디스크, 데이터베이스 등의 값비싼 자원을 사용하지 않는다면 전혀 문제가 되지 않을 것이다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cash</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> dollars;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">euro</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Exchange().rate(<span class="string">&quot;USD&quot;</span>, <span class="string">&quot;EUR&quot;</span>) * <span class="keyword">this</span>.dollars;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>euro()</code> 메소드를 사용할때마다 원격지와 통신을 하게 될 경우에 이 객체를 사용하는 사용자 입장에서는 매번 원격지와의 통신을 강요받을 수 밖에 없다. 이러한 결합을 피하기 위해서는 코드 자체를 수정할 수 밖에 없는데 이런식의 수정은 테스트와 유지보수성을 급격하게 낮출 수 밖에 없다. 다시 말해, 의존성에 대한 제어를 <code>Cash</code> 클래스 자신이 하고 있는 상황이다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cash</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> dollars;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Exchange exchange;</span><br><span class="line"></span><br><span class="line">	Cash(<span class="keyword">int</span> value, Exchange exchange) &#123;</span><br><span class="line">		<span class="keyword">this</span>.dollars = value;</span><br><span class="line">		<span class="keyword">this</span>.exchange = exchange;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">euro</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.rate(<span class="string">&quot;USD&quot;</span>, <span class="string">&quot;EUR&quot;</span>) * <span class="keyword">this</span>.dollars;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>위와 같이 코드를 수정하게 될 경우, 생성자를 통하여 제공받은 <code>Exchange</code>와 협력을 할 수 있게 된다.</li>
<li>의존성에 대한 제어 주체가 <code>Cash</code> 클래스가 아닌 외부 혹은 사용하는 쪽에서 제어할 수 있도록 수정이 되었다.</li>
<li>객체가 필요한 의존성을 직접 생성하는 대신, 생성자를 통해 <strong>의존성을 주입</strong> 받으며 <code>Exchange</code> 타입의 의존성 즉 직접 작성한 코드 혹은 다른 객체를 주입하여 해당 객체가 호출이 되도록 <strong>제어의 역전</strong>을 수행하게 된다.</li>
</ul>
<h3 id="3-7-인트로스펙션과-캐스팅을-피하세요"><a href="#3-7-인트로스펙션과-캐스팅을-피하세요" class="headerlink" title="3.7 인트로스펙션과 캐스팅을 피하세요"></a>3.7 인트로스펙션과 캐스팅을 피하세요</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">(Iterable&lt;T&gt; items)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (items <span class="keyword">instanceof</span> Collection) &#123;</span><br><span class="line">		<span class="keyword">return</span> Collection.class.cast(items).size()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (T item: items) &#123;</span><br><span class="line">		++size;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>런타임에 객체 타입을 조사하는 것은 클래스 사이의 결합도가 높아지기 때문에 기술적인 관점에서 좋지 않음</li>
<li>위 예제에서는 <code>Iterable</code>과 <code>Collection</code> 인터페이스에 의존을 하고 있으며, 대상이 많아질수록 별도의 분기와 코드가 생겨나기 때문에 유지보수성이 좋아질 수가 없을 것이다.</li>
<li>취급하는 타입에 따라 객체를 차별하기 때문에 자율성이라는 객체지향의 기본적인 베이스 정신을 훼손하는 코드라고 한다.</li>
<li>타입 체킹 혹은 캐스팅을 하려거든 차라리 <code>메소드 오버로딩(method overloading)</code>을 활용하자.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">(Iterable&lt;T&gt; items)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (T item: items) &#123;</span><br><span class="line">		++size;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">(Collection&lt;T&gt; items)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> items.size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4장-은퇴"><a href="#4장-은퇴" class="headerlink" title="4장 은퇴"></a>4장 은퇴</h2></li>
</ul>
<hr>
<h3 id="4-1-절대-NULL을-반환하지-마세요"><a href="#4-1-절대-NULL을-반환하지-마세요" class="headerlink" title="4.1 절대 NULL을 반환하지 마세요"></a>4.1 절대 NULL을 반환하지 마세요</h3><ul>
<li>객체를 장애를 가진 존재로 취급해서는 안된다</li>
<li>항상 <code>NullPointerException</code> 예외가 던져질지 모른다는 사실은 기술적인 불편함을 넘어서서 해당 객체에 대한 <code>신뢰</code>가 무너졌다는 사실이다. 결국, <em><strong>객체에게 작업을 요청한 후 안심하고 결과에 의지할 수 없다.</strong></em> 또한,  이는 곧 유지보수성의 심각한 손실로 이어진다.</li>
<li><strong>객체라는 사상에는 우리가 신뢰하는 엔티티라는 개념이 담겨져 있다.</strong></li>
<li>객체는 자신이 맡은 일을 수행하는 방법을 스스로 결정한다. <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">list</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line">	File[] files = dir.listFiles();</span><br><span class="line">	<span class="comment">// 매번 아래와 같은 체크를 해야 한다면, 장황한 코드의 추가와 더불어 매번 반환값을 확인해야 한다.</span></span><br><span class="line">	<span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;Directory is absent&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">		System.out.println(file.getName());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>빠르게 실패하기 원칙(fail fast principle)</code>, <code>null</code>을 리턴하는 대신 예외를 던져 빠르게 실패하는 것.</li>
<li><code>빠르게 실패하기 원칙</code> vs <code>안전하게 실패하기</code><ul>
<li>안전하게 실패하기는 버그, 입출력 문제, 메모리 오버플로우 등이 발생한 상황에서도 소프트웨어가 계속 실행될 수 있도록 최대한 많은 노력을 기울이는 것</li>
<li>빠르게 실패하기는 일반 문제가 발생하면 곧바로 실행을 중단하고 빠르게 예외를 던짐. 실패를 감추는 대신 강조.</li>
</ul>
</li>
<li>어떤 버그는 명확하지만, 또 그렇지 않고 조용히 숨어 있는 경우가 있다.<blockquote>
<p>버그가 존재하는 사실을 숨기는 것은 스스로에게 죄를 짓고 있는 것이며 상처를 드러내어 치료하는 대신, 상처를 숨기고 모든 일이 순조롭게 진행되고 있다고 환자에게 거짓말을 하는 행위이다. </p>
</blockquote>
</li>
<li>NULL의 대안은?<ul>
<li>메소드를 분리<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 아래의 경우, DB IO가 두번 발생하여 비효율적이다.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exists</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (<span class="comment">/*DB에 없다면*/</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="comment">/* From DB */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>NULL을 반환하는 대신 기본값을 반환<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> Collection&lt;User&gt; <span class="title">users</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="comment">/*DB에 없다면*/</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> emptyList();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> Collections.singleton(<span class="comment">/* From DB */</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
<li><code>Optional</code>과 같은 클래스를 활용</li>
<li><code>Null</code> Object를 만드는 방법<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NullUser</span> <span class="keyword">implements</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String label;</span><br><span class="line">NullUser(String name) &#123;</span><br><span class="line">	<span class="keyword">this</span>.label = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.label;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">raise</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;인상 못해유~&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-체크-예외-checked-exception-만-던지세요"><a href="#4-2-체크-예외-checked-exception-만-던지세요" class="headerlink" title="4.2 체크 예외(checked exception)만 던지세요"></a>4.2 체크 예외(checked exception)만 던지세요</h3></li>
</ul>
</li>
<li>Checked Exception은 메소드를 호출하는 쪽에 예외를 처리하도록 강제할 수 있다.<br>Method에 명시적으로 예외의 타입이 노출이 되기 때문에 어떤 종류의 예외가 발생할지 예측할 수 있다. 다시 말해, 책임을 클라이언트에 전달하면서 제 자신이 안전하지 않다라고 선언하는 샘이다.</li>
<li>UnChecked Exception의 경우, 별도로 예외를 처리하지 않으면 최상위로 전달~ 전달~</li>
<li>꼭 필요한 경우가 아니라면 예외는 안잡는 것이 최선이다. 예외를 처리할때는 반드시 그 이유가 존재해야 한다. 만약 제어 흐름을 위해 예외를 사용하는 것이라면 이는 예외라는 것의 처리 목적과 전혀 부합하지 않게된다.</li>
<li>예외는 반드시(항상) 체이닝하세요.<br>절대 원래 예외를 무시하지 말고 체이닝하여 낮은 수준의 근본 원인을 소프트웨어의 상위 레이어로 이동시킬 수 있게 된다. 또한, 문제에 대한 가치 있는 정보를 포함하기 때문에 빠르게 실수에 대응할 수 있게 된다.</li>
<li>예외는 복구가 될 수 있다. 하지만, 무분별한 예외 복구보다는 분명한 이유가 있는 예외 복구와 진입로/출구로 가는 접점에 이를 배치하는 것이 좀 더 효율적이라고 할 수 있다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		System.out.println(<span class="keyword">new</span> App().run())</span><br><span class="line">	&#125; <span class="keyword">catch</span>(Exception ex) &#123;</span><br><span class="line">		System.err.println(<span class="string">&quot;죄송하지만 문제가 발생했어요:&quot;</span> + ex.getLocalizedMessage() )</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>main에서 예외를 잡지 않게 되면 런타임 환경으로 예외가 전달되고 결국 JVM이 이를 처리하게 될 것이다. 이는 곧 사용자에게 노출을 시키지 말아야 할 메세지를 노출하게 될수도 있다. 위와 같은 장소가 예외를 복구하기 좋은 장소라고 할 수 있다.</li>
</ul>
<h3 id="4-3-final이거나-abstract이거나"><a href="#4-3-final이거나-abstract이거나" class="headerlink" title="4.3 final이거나 abstract이거나"></a>4.3 final이거나 abstract이거나</h3><h3 id="4-4-RAII를-사용하세요"><a href="#4-4-RAII를-사용하세요" class="headerlink" title="4.4 RAII를 사용하세요"></a>4.4 RAII를 사용하세요</h3><h2 id="후기"><a href="#후기" class="headerlink" title="후기"></a>후기</h2></div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2021/06/09/Java/THREAD/">Thread 관련 링크 정리</a><a class="next" href="/2021/04/22/Persistence/JPA_ACCESS/">JPA @Access</a></div><script src="https://utteranc.es/client.js" repo="thefeeling/thefeeling.github.io" issue-term="title" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://thefeeling.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 카테고리</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ARCHITECTURE/">ARCHITECTURE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/">AWS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DATABASE/">DATABASE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DDD/">DDD</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DIARY/">DIARY</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MESSAGING/">MESSAGING</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Persistence/">Persistence</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 태그</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 과거</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/08/13/DIARY/20210813/">20210813</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/09/ARCHITECTURE/DATA_INTENSIVE_APPLICATION/">데이터 중심 어플리케이션 설계 - 7장 트랜잭션</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/08/DIARY/20210808/">20210808</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/05/DIARY/20210805/">20210805</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/01/DIARY/20210801/">20210801</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/30/DIARY/20210730/">20210730</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/28/DIARY/20210728/">20210728</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/27/DIARY/20210727/">20210727</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/27/Spring/MVC_RequestParam/">MVC와 WebFlux에서의 @ReqeustParam</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/27/Kotlin/Kotlin_In_Action/">Kotlin-In-Action Generics</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">Choi's Dev.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" id="maid-script" mermaidoptioins="{&quot;startOnload&quot;:true}" src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js?v=1.0.0"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>